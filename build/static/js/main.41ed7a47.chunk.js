(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{77:function(e,t,n){"use strict";n.r(t),n.d(t,"app",(function(){return Xe})),n.d(t,"chatRef",(function(){return Ze}));var a,r,c,i,o,s,d,b,l,j,u,p,h,O,x,f,g,m,v,C,w,y,z,D,M,k,S,I,L,Y,H,R,T,A=n(1),_=n.n(A),F=n(36),N=n.n(F),W=n(49),B=n(29),J=n(60),E=n(10),K=n(6),U=n(7),G=n(22),V=n.n(G),q=(n(73),n(11)),P=function(){Object(q.i)(Ze,{}).catch((function(e){window.alert("\u30c7\u30fc\u30bf\u306e\u524a\u9664\u6642\u306b\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f"),console.log(e)}))},Q=function(){for(var e=V()(),t=[],n=0;n<60;n++){var a="";a=n<10?"0"+n:"".concat(n),t[n]={user_name:"\u30c6\u30b9\u30c8".concat(n),text:"".concat(n+1),createdAt:e.format("YYYY-MM-DD HH:mm:".concat(a)),order:n+1}}Object(q.i)(Ze,t)},X="dodgerblue",Z=n(35),$={xl:function(){return Z.a.greaterThan("large").apply(void 0,arguments)},lg:function(){return Z.a.between("medium","large").apply(void 0,arguments)},md:function(){return Z.a.lessThan("medium").apply(void 0,arguments)},lessThanlg:function(){return Z.a.lessThan("large").apply(void 0,arguments)}},ee=n(4),te=function(){return Object(ee.jsxs)(ne,{children:[Object(ee.jsx)(ae,{children:"Realtime Chat"}),Object(ee.jsx)(re,{children:"React/React Redux/Firebase Realtime Database"}),Object(ee.jsxs)(ce,{children:[Object(ee.jsx)(ie,{onClick:P,children:"\u5168\u524a\u9664"}),Object(ee.jsx)(ie,{onClick:Q,children:"\u30b7\u30fc\u30c9\u30c7\u30fc\u30bf"})]})]})},ne=U.b.div(a||(a=Object(K.a)(["\n  background: linear-gradient(to left, ",", skyblue);\n  color: white;\n  text-align: center;\n  position: relative;\n"])),X),ae=U.b.h1(r||(r=Object(K.a)(["\n  font-size: 32px;\n  margin: 0;\n  ","\n  ","\n"])),$.lg(c||(c=Object(K.a)(["\n    font-size: 30px;\n    "]))),$.md(i||(i=Object(K.a)(["\n    font-size: 28px;\n    "])))),re=U.b.h2(o||(o=Object(K.a)(["\n  font-weight: normal;\n  margin: 0;\n\n  font-size: 22px;\n  ","\n  ","\n"])),$.lg(s||(s=Object(K.a)(["\n    font-size: 18px;\n    "]))),$.md(d||(d=Object(K.a)(["\n    font-size: 16px;\n    "])))),ce=U.b.div(b||(b=Object(K.a)(["\n  display: grid;\n  grid-gap: 1px;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  max-width: 100px;\n  ","\n"])),$.md(l||(l=Object(K.a)(["\n    top: 2px;\n    right: 2px;\n  "])))),ie=U.b.button(j||(j=Object(K.a)(["\n  font-size: 12px;\n  ","\n"])),$.lessThanlg(u||(u=Object(K.a)(["\n    font-size: 10px;\n    "])))),oe=n(14),se=U.b.button(p||(p=Object(K.a)(["\n  color: #ffffff;\n  background-color: ",";\n  margin: 5px;\n  padding: 6px 10px;\n  cursor: pointer;\n\n  border-radius: 30px;\n  border: none;\n  box-shadow: 4px 4px 3px gray;\n\n  transition: 0.3s;\n  &:hover {\n    box-shadow: none;\n    text-decoration: none;\n    opacity: 0.6;\n  }\n\n  font-size: 14px;\n  ","\n  ","\n"])),X,$.lg(h||(h=Object(K.a)(["\n    font-size: 12px;\n    "]))),$.md(O||(O=Object(K.a)(["\n    font-size: 10px;\n    "])))),de=n(16),be=B.c,le=Object(de.b)({name:"latestChatOrder",initialState:0,reducers:{setLatestChatOrder:function(e,t){return t.payload}}}),je=le.reducer,ue=le.actions.setLatestChatOrder,pe=U.b.input(x||(x=Object(K.a)(["\n  height: 30px;\n  border-radius: 30px;\n  border: 0;\n  box-sizing: border-box;\n  :focus {\n    outline: 2px solid ",";\n  }\n  ::placeholder {\n    font-size: 14px;\n    ","\n    ","\n  }\n  width: 30vw;\n  padding-left: 20px;\n  ","\n  ","\n"])),X,$.lg(f||(f=Object(K.a)(["\n    font-size: 12px;\n    "]))),$.md(g||(g=Object(K.a)(["\n    font-size: 10px;\n    "]))),$.lg(m||(m=Object(K.a)(["\n    padding-left: 15px;\n    width: 40vw;\n    "]))),$.md(v||(v=Object(K.a)(["\n    padding-left: 7px;\n    width: 60vw;\n    "])))),he=function(){var e=Object(A.useState)(!1),t=Object(oe.a)(e,2),n=t[0],a=t[1],r=Object(A.useState)(""),c=Object(oe.a)(r,2),i=c[0],o=c[1],s=Object(A.useState)(""),d=Object(oe.a)(s,2),b=d[0],l=d[1],j={latestChatOrder:be((function(e){return e.latestChatOrder}))}.latestChatOrder;return Object(ee.jsx)(Oe,{children:n?Object(ee.jsxs)(xe,{onSubmit:function(e){e.preventDefault()},children:[Object(ee.jsx)(fe,{children:i}),Object(ee.jsx)(pe,{value:b,placeholder:"\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u3069\u3046\u305e",onChange:function(e){return l(e.target.value)}}),Object(ee.jsx)(se,{onClick:function(){return function(e){var t=e.userName,n=e.text,a=e.setText,r=e.isLogin,c=e.latestChatOrder;if(!1===r)window.alert("\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044");else if(0===n.length)window.alert("\u30c6\u30ad\u30b9\u30c8\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");else{var i={user_name:t,text:n,createdAt:V()().format("YYYY-MM-DD HH:mm:ss"),order:c+1};Object(q.f)(Ze,i),a("")}}({userName:i,text:b,setText:l,isLogin:n,latestChatOrder:j})},type:"submit",children:"\u9001\u4fe1"})]}):Object(ee.jsxs)("form",{children:[Object(ee.jsx)(pe,{value:i,placeholder:"\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",onChange:function(e){return o(e.target.value)}}),Object(ee.jsx)(se,{onClick:function(){0===i.length?window.alert("\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"):a(!0)},children:"\u30ed\u30b0\u30a4\u30f3"})]})})},Oe=U.b.div(C||(C=Object(K.a)(["\n  background-color: #d0e7e7;\n  text-align: center;\n\n  font-size: 16px;\n  ","\n  ","\n"])),$.lg(w||(w=Object(K.a)(["\n    font-size: 14px;\n    "]))),$.md(y||(y=Object(K.a)(["\n    font-size: 12px;\n    "])))),xe=U.b.form(z||(z=Object(K.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),fe=U.b.span(D||(D=Object(K.a)(["\n  padding-right: 20px;\n"]))),ge=n(54),me=n.n(ge),ve=n(89),Ce=Object(de.b)({name:"chatData",initialState:[],reducers:{setChatData:function(e,t){return t.payload}}}),we=Ce.reducer,ye=Ce.actions.setChatData,ze=function(){return{dispatch:Object(B.b)()}},De=n(24),Me=n(41),ke=function(e){var t=Object.entries(e||{}).map((function(e){var t=Object(oe.a)(e,2);return{key:t[0],value:t[1]}})),n=Object(De.a)(t).reverse(),a=[];return n.map((function(e,t){return a[t]=Object(Me.a)(Object(Me.a)({},e.value),{},{key:e.key}),0})),a},Se=Object(de.b)({name:"hasMore",initialState:!0,reducers:{setHasMore:function(e,t){return t.payload}}}),Ie=Se.reducer,Le=Se.actions.setHasMore,Ye=Object(de.b)({name:"lastChatOrder",initialState:1,reducers:{setLastChatOrder:function(e,t){return t.payload}}}),He=Ye.reducer,Re=Ye.actions.setLastChatOrder,Te=Object(de.b)({name:"isChatsCompleted",initialState:!1,reducers:{setIsChatsCompleted:function(e,t){return t.payload}}}),Ae=Te.reducer,_e=Te.actions.setIsChatsCompleted,Fe=function(){var e={chatData:be((function(e){return e.chatData}))}.chatData,t={hasMore:be((function(e){return e.hasMore}))}.hasMore,n={isChatsCompleted:be((function(e){return e.isChatsCompleted}))}.isChatsCompleted,a={lastChatOrder:be((function(e){return e.lastChatOrder}))}.lastChatOrder,r=ze().dispatch;return Object(ee.jsx)(Ne,{children:n?Object(ee.jsx)(me.a,{loadMore:function(){return function(e){var t=e.dispatch,n=e.chatData,a=e.lastChatOrder,r=e.hasMore,c=Object(q.g)(Ze,Object(q.e)("order"),Object(q.a)(a),Object(q.c)(11));r&&Object(q.d)(c,(function(e){var a=ke(e.val()),r=[].concat(Object(De.a)(n),Object(De.a)(a));if(t(ye(r)),0!==r.length){var c=r[r.length-1];1===c.order&&t(Le(!1)),t(Re(c.order))}}),{onlyOnce:!0})}({dispatch:r,chatData:e,lastChatOrder:a,hasMore:t})},hasMore:t,loader:Object(ee.jsx)(Ke,{},0),initialLoad:!1,threshold:50,children:0===e.length?Object(ee.jsx)("span",{children:"\u30c1\u30e3\u30c3\u30c8\u304c\u5b58\u5728\u3057\u307e\u305b\u3093"}):e.map((function(e){return Object(ee.jsxs)(We,{children:[Object(ee.jsx)(Be,{children:e.user_name}),Object(ee.jsx)(Je,{children:e.text}),Object(ee.jsx)(Ee,{children:V()(e.createdAt).fromNow()})]},e.key)}))}):Object(ee.jsx)(Ke,{})})},Ne=U.b.div(M||(M=Object(K.a)(["\n  justify-content: center;\n  margin: 5px;\n  text-align: center;\n  font-size: 16px;\n  ","\n  ","\n"])),$.lg(k||(k=Object(K.a)(["\n    font-size: 14px;\n    "]))),$.md(S||(S=Object(K.a)(["\n    font-size: 12px;\n    "])))),We=U.b.div(I||(I=Object(K.a)(["\n  display: grid;\n  align-items: center;\n  text-align: left;\n  border-bottom: 2px #cecece solid;\n  grid-template-rows: 40px 25px;\n  grid-template-columns: 30vw 40vw 20vw;\n"]))),Be=U.b.div(L||(L=Object(K.a)(["\n  grid-column-start: 1;\n  grid-column-end: 2;\n  font-weight: bold;\n"]))),Je=U.b.div(Y||(Y=Object(K.a)(["\n  grid-column-start: 2;\n  grid-column-end: 4;\n"]))),Ee=U.b.div(H||(H=Object(K.a)(["\n  grid-column-start: 3;\n  grid-column-end: 4;\n  grid-row-start: 2;\n  grid-row-end: 3;\n  color: gray;\n"]))),Ke=Object(U.b)(ve.a)(R||(R=Object(K.a)(["\n  color: ",";\n"])),X),Ue=function(){return V.a.locale("ja"),function(){var e=ze().dispatch,t=Object(q.g)(Ze,Object(q.e)("order"),Object(q.c)(40));Object(A.useEffect)((function(){Object(q.d)(Object(q.g)(t),(function(t){var n=ke(t.val());if(e(ye(n)),0===n.length)e(ue(0)),e(Re(1));else{var a=n[n.length-1];e(ue(n[0].order)),e(Re(a.order))}n.length<40?e(Le(!1)):e(Le(!0)),e(_e(!0))}))}),[])}(),Object(ee.jsxs)(Ge,{children:[Object(ee.jsx)(te,{}),Object(ee.jsx)(he,{}),Object(ee.jsx)(Fe,{})]})},Ge=U.b.div(T||(T=Object(K.a)(["\n  min-height: 100vh;\n"]))),Ve="/",qe=function(){return Object(ee.jsx)(J.a,{basename:"/chat-app",children:Object(ee.jsxs)(E.d,{children:[Object(ee.jsx)(E.b,{exact:!0,path:Ve,children:Object(ee.jsx)(Ue,{})}),Object(ee.jsx)(E.b,{path:"*",children:Object(ee.jsx)(E.a,{to:{pathname:Ve}})})]})})},Pe=Object(de.a)({reducer:{chatData:we,isChatsCompleted:Ae,hasMore:Ie,latestChatOrder:je,lastChatOrder:He}}),Qe=function(){return Object(ee.jsx)(B.a,{store:Pe,children:Object(ee.jsx)(qe,{})})},Xe=Object(W.a)({apiKey:"AIzaSyBWHpjDjI7YW1_ULoFJ-WCzas_FCsdpWlA",authDomain:"chat-app-915d3.firebaseapp.com",databaseURL:"https://chat-app-915d3-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"chat-app-915d3",storageBucket:"chat-app-915d3.appspot.com",messagingSenderId:"321030390665",appId:"1:321030390665:web:83c3ceaa9ae959930b1758",measurementId:"G-V4HKR4STNF"}),Ze=function(e){var t=Object(q.b)(e);return Object(q.h)(t,"chats")}(Xe);N.a.render(Object(ee.jsx)(_.a.StrictMode,{children:Object(ee.jsx)(Qe,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.41ed7a47.chunk.js.map