(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{77:function(e,t,n){"use strict";n.r(t),n.d(t,"app",(function(){return Pe})),n.d(t,"chatRef",(function(){return Qe}));var a,r,c,i,o,s,d,b,l,j,u,h,p,O,f,x,g,m,v,C,w,y,z,D,M,k,S,I,L,Y,H,R=n(1),T=n.n(R),A=n(36),_=n.n(A),F=n(49),N=n(29),W=n(60),B=n(10),J=n(6),E=n(7),K=n(22),U=n.n(K),G=(n(73),n(11)),V=function(){Object(G.i)(Qe,{}).catch((function(e){window.alert("\u30c7\u30fc\u30bf\u306e\u524a\u9664\u6642\u306b\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f"),console.log(e)}))},q=function(){for(var e=U()(),t=[],n=0;n<60;n++){var a="";a=n<10?"0"+n:"".concat(n),t[n]={user_name:"\u30c6\u30b9\u30c8".concat(n),text:"".concat(n+1),createdAt:e.format("YYYY-MM-DD HH:mm:".concat(a)),order:n+1}}Object(G.i)(Qe,t)},P="dodgerblue",Q=n(35),X={xl:function(){return Q.a.greaterThan("large").apply(void 0,arguments)},lg:function(){return Q.a.between("medium","large").apply(void 0,arguments)},md:function(){return Q.a.lessThan("medium").apply(void 0,arguments)},lessThanlg:function(){return Q.a.lessThan("large").apply(void 0,arguments)}},Z=n(4),$=function(){return Object(Z.jsxs)(ee,{children:[Object(Z.jsx)(te,{children:"Realtime Chat"}),Object(Z.jsx)(ne,{children:"React/React Redux/Firebase Realtime Database"}),Object(Z.jsxs)(ae,{children:[Object(Z.jsx)(re,{onClick:V,children:"\u5168\u524a\u9664"}),Object(Z.jsx)(re,{onClick:q,children:"\u30b7\u30fc\u30c9\u30c7\u30fc\u30bf"})]})]})},ee=E.b.div(a||(a=Object(J.a)(["\n  background: linear-gradient(to left, ",", skyblue);\n  color: white;\n  text-align: center;\n  position: relative;\n"])),P),te=E.b.h1(r||(r=Object(J.a)(["\n  font-size: 32px;\n  margin: 0;\n  ","\n  ","\n"])),X.lg(c||(c=Object(J.a)(["\n    font-size: 30px;\n    "]))),X.md(i||(i=Object(J.a)(["\n    font-size: 28px;\n    "])))),ne=E.b.h2(o||(o=Object(J.a)(["\n  font-weight: normal;\n  margin: 0;\n\n  font-size: 22px;\n  ","\n  ","\n"])),X.lg(s||(s=Object(J.a)(["\n    font-size: 20px;\n    "]))),X.md(d||(d=Object(J.a)(["\n    font-size: 18px;\n    "])))),ae=E.b.div(b||(b=Object(J.a)(["\n  position: absolute;\n  top: 10px;\n  right: 10px;\n"]))),re=E.b.button(l||(l=Object(J.a)(["\n  font-size: 12px;\n  ","\n  ","\n"])),X.lg(j||(j=Object(J.a)(["\n    font-size: 10px;\n    "]))),X.md(u||(u=Object(J.a)(["\n    font-size: 8px;\n    "])))),ce=n(14),ie=E.b.button(h||(h=Object(J.a)(["\n  color: #ffffff;\n  background-color: ",";\n  margin: 5px;\n  padding: 6px 10px;\n  cursor: pointer;\n\n  border-radius: 30px;\n  border: none;\n  box-shadow: 4px 4px 3px gray;\n\n  transition: 0.3s;\n  &:hover {\n    box-shadow: none;\n    text-decoration: none;\n    opacity: 0.6;\n  }\n\n  font-size: 14px;\n  ","\n  ","\n"])),P,X.lg(p||(p=Object(J.a)(["\n    font-size: 12px;\n    "]))),X.md(O||(O=Object(J.a)(["\n    font-size: 10px;\n    "])))),oe=n(16),se=N.c,de=Object(oe.b)({name:"latestChatOrder",initialState:0,reducers:{setLatestChatOrder:function(e,t){return t.payload}}}),be=de.reducer,le=de.actions.setLatestChatOrder,je=E.b.input(f||(f=Object(J.a)(["\n  height: 30px;\n  width: 30vw;\n  padding-left: 20px;\n  border-radius: 30px;\n  border: 0;\n  box-sizing: border-box;\n  :focus {\n    outline: 2px solid ",";\n  }\n  ::placeholder {\n    font-size: 14px;\n    ","\n    ","\n  }\n"])),P,X.lg(x||(x=Object(J.a)(["\n    font-size: 12px;\n    "]))),X.md(g||(g=Object(J.a)(["\n    font-size: 10px;\n    "])))),ue=function(){var e=Object(R.useState)(!1),t=Object(ce.a)(e,2),n=t[0],a=t[1],r=Object(R.useState)(""),c=Object(ce.a)(r,2),i=c[0],o=c[1],s=Object(R.useState)(""),d=Object(ce.a)(s,2),b=d[0],l=d[1],j={latestChatOrder:se((function(e){return e.latestChatOrder}))}.latestChatOrder;return Object(Z.jsx)(he,{children:n?Object(Z.jsxs)(pe,{onSubmit:function(e){e.preventDefault()},children:[Object(Z.jsx)(Oe,{children:i}),Object(Z.jsx)(je,{value:b,placeholder:"\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u3069\u3046\u305e",onChange:function(e){return l(e.target.value)}}),Object(Z.jsx)(ie,{onClick:function(){return function(e){var t=e.userName,n=e.text,a=e.setText,r=e.isLogin,c=e.latestChatOrder;if(!1===r)window.alert("\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044");else if(0===n.length)window.alert("\u30c6\u30ad\u30b9\u30c8\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");else{var i={user_name:t,text:n,createdAt:U()().format("YYYY-MM-DD HH:mm:ss"),order:c+1};Object(G.f)(Qe,i),a("")}}({userName:i,text:b,setText:l,isLogin:n,latestChatOrder:j})},type:"submit",children:"\u9001\u4fe1"})]}):Object(Z.jsxs)("form",{children:[Object(Z.jsx)(je,{value:i,placeholder:"\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",onChange:function(e){return o(e.target.value)}}),Object(Z.jsx)(ie,{onClick:function(){0===i.length?window.alert("\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"):a(!0)},children:"\u30ed\u30b0\u30a4\u30f3"})]})})},he=E.b.div(m||(m=Object(J.a)(["\n  background-color: #d0e7e7;\n  text-align: center;\n\n  font-size: 16px;\n  ","\n  ","\n"])),X.lg(v||(v=Object(J.a)(["\n    font-size: 14px;\n    "]))),X.md(C||(C=Object(J.a)(["\n    font-size: 12px;\n    "])))),pe=E.b.form(w||(w=Object(J.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),Oe=E.b.span(y||(y=Object(J.a)(["\n  padding-right: 20px;\n"]))),fe=n(54),xe=n.n(fe),ge=n(89),me=Object(oe.b)({name:"chatData",initialState:[],reducers:{setChatData:function(e,t){return t.payload}}}),ve=me.reducer,Ce=me.actions.setChatData,we=function(){return{dispatch:Object(N.b)()}},ye=n(24),ze=n(41),De=function(e){var t=Object.entries(e||{}).map((function(e){var t=Object(ce.a)(e,2);return{key:t[0],value:t[1]}})),n=Object(ye.a)(t).reverse(),a=[];return n.map((function(e,t){return a[t]=Object(ze.a)(Object(ze.a)({},e.value),{},{key:e.key}),0})),a},Me=Object(oe.b)({name:"hasMore",initialState:!0,reducers:{setHasMore:function(e,t){return t.payload}}}),ke=Me.reducer,Se=Me.actions.setHasMore,Ie=Object(oe.b)({name:"lastChatOrder",initialState:1,reducers:{setLastChatOrder:function(e,t){return t.payload}}}),Le=Ie.reducer,Ye=Ie.actions.setLastChatOrder,He=Object(oe.b)({name:"isChatsCompleted",initialState:!1,reducers:{setIsChatsCompleted:function(e,t){return t.payload}}}),Re=He.reducer,Te=He.actions.setIsChatsCompleted,Ae=function(){var e={chatData:se((function(e){return e.chatData}))}.chatData,t={hasMore:se((function(e){return e.hasMore}))}.hasMore,n={isChatsCompleted:se((function(e){return e.isChatsCompleted}))}.isChatsCompleted,a={lastChatOrder:se((function(e){return e.lastChatOrder}))}.lastChatOrder,r=we().dispatch;return Object(Z.jsx)(_e,{children:n?Object(Z.jsx)(xe.a,{loadMore:function(){return function(e){var t=e.dispatch,n=e.chatData,a=e.lastChatOrder,r=e.hasMore,c=Object(G.g)(Qe,Object(G.e)("order"),Object(G.a)(a),Object(G.c)(11));r&&Object(G.d)(c,(function(e){var a=De(e.val()),r=[].concat(Object(ye.a)(n),Object(ye.a)(a));if(t(Ce(r)),0!==r.length){var c=r[r.length-1];1===c.order&&t(Se(!1)),t(Ye(c.order))}}),{onlyOnce:!0})}({dispatch:r,chatData:e,lastChatOrder:a,hasMore:t})},hasMore:t,loader:Object(Z.jsx)(Je,{},0),initialLoad:!1,threshold:50,children:0===e.length?Object(Z.jsx)("span",{children:"\u30c1\u30e3\u30c3\u30c8\u304c\u5b58\u5728\u3057\u307e\u305b\u3093"}):e.map((function(e){return Object(Z.jsxs)(Fe,{children:[Object(Z.jsx)(Ne,{children:e.user_name}),Object(Z.jsx)(We,{children:e.text}),Object(Z.jsx)(Be,{children:U()(e.createdAt).fromNow()})]},e.key)}))}):Object(Z.jsx)(Je,{})})},_e=E.b.div(z||(z=Object(J.a)(["\n  justify-content: center;\n  margin: 5px;\n  text-align: center;\n  font-size: 16px;\n  ","\n  ","\n"])),X.lg(D||(D=Object(J.a)(["\n    font-size: 14px;\n    "]))),X.md(M||(M=Object(J.a)(["\n    font-size: 12px;\n    "])))),Fe=E.b.div(k||(k=Object(J.a)(["\n  display: grid;\n  align-items: center;\n  text-align: left;\n  border-bottom: 2px #cecece solid;\n  grid-template-rows: 40px 25px;\n  grid-template-columns: 30vw 40vw 20vw;\n"]))),Ne=E.b.div(S||(S=Object(J.a)(["\n  grid-column-start: 1;\n  grid-column-end: 2;\n  font-weight: bold;\n"]))),We=E.b.div(I||(I=Object(J.a)(["\n  grid-column-start: 2;\n  grid-column-end: 4;\n"]))),Be=E.b.div(L||(L=Object(J.a)(["\n  grid-column-start: 3;\n  grid-column-end: 4;\n  grid-row-start: 2;\n  grid-row-end: 3;\n  color: gray;\n"]))),Je=Object(E.b)(ge.a)(Y||(Y=Object(J.a)(["\n  color: ",";\n"])),P),Ee=function(){return U.a.locale("ja"),function(){var e=we().dispatch,t=Object(G.g)(Qe,Object(G.e)("order"),Object(G.c)(40));Object(R.useEffect)((function(){Object(G.d)(Object(G.g)(t),(function(t){var n=De(t.val());if(e(Ce(n)),0===n.length)e(le(0)),e(Ye(1));else{var a=n[n.length-1];e(le(n[0].order)),e(Ye(a.order))}n.length<40?e(Se(!1)):e(Se(!0)),e(Te(!0))}))}),[])}(),Object(Z.jsxs)(Ke,{children:[Object(Z.jsx)($,{}),Object(Z.jsx)(ue,{}),Object(Z.jsx)(Ae,{})]})},Ke=E.b.div(H||(H=Object(J.a)(["\n  min-height: 100vh;\n"]))),Ue="/",Ge=function(){return Object(Z.jsx)(W.a,{basename:"/chat-app",children:Object(Z.jsxs)(B.d,{children:[Object(Z.jsx)(B.b,{exact:!0,path:Ue,children:Object(Z.jsx)(Ee,{})}),Object(Z.jsx)(B.b,{path:"*",children:Object(Z.jsx)(B.a,{to:{pathname:Ue}})})]})})},Ve=Object(oe.a)({reducer:{chatData:ve,isChatsCompleted:Re,hasMore:ke,latestChatOrder:be,lastChatOrder:Le}}),qe=function(){return Object(Z.jsx)(N.a,{store:Ve,children:Object(Z.jsx)(Ge,{})})},Pe=Object(F.a)({apiKey:"AIzaSyBWHpjDjI7YW1_ULoFJ-WCzas_FCsdpWlA",authDomain:"chat-app-915d3.firebaseapp.com",databaseURL:"https://chat-app-915d3-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"chat-app-915d3",storageBucket:"chat-app-915d3.appspot.com",messagingSenderId:"321030390665",appId:"1:321030390665:web:83c3ceaa9ae959930b1758",measurementId:"G-V4HKR4STNF"}),Qe=function(e){var t=Object(G.b)(e);return Object(G.h)(t,"chats")}(Pe);_.a.render(Object(Z.jsx)(T.a.StrictMode,{children:Object(Z.jsx)(qe,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.1775f5f6.chunk.js.map